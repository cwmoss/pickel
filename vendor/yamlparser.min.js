var Pattern$5,commonjsGlobal="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function commonjsRequire(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}Pattern$5=function(){class Pattern{constructor(rawRegex,modifiers=""){var _char,capturingBracketNumber,cleanedRegex,i,len,mapping,name,part,subChar;for(cleanedRegex="",len=rawRegex.length,mapping=null,capturingBracketNumber=0,i=0;i<len;){if("\\"===(_char=rawRegex.charAt(i)))cleanedRegex+=rawRegex.slice(i,+(i+1)+1||9e9),i++;else if("("===_char)if(i<len-2)if("(?:"===(part=rawRegex.slice(i,+(i+2)+1||9e9)))i+=2,cleanedRegex+=part;else if("(?<"===part)for(capturingBracketNumber++,i+=2,name="";i+1<len;){if(">"===(subChar=rawRegex.charAt(i+1))){cleanedRegex+="(",i++,name.length>0&&(null==mapping&&(mapping={}),mapping[name]=capturingBracketNumber);break}name+=subChar,i++}else cleanedRegex+=_char,capturingBracketNumber++;else cleanedRegex+=_char;else cleanedRegex+=_char;i++}this.rawRegex=rawRegex,this.cleanedRegex=cleanedRegex,this.regex=new RegExp(this.cleanedRegex,"g"+modifiers.replace("g","")),this.mapping=mapping}exec(str){var index,matches,name,ref;if(this.regex.lastIndex=0,null==(matches=this.regex.exec(str)))return null;if(null!=this.mapping)for(name in ref=this.mapping)index=ref[name],matches[name]=matches[index];return matches}test(str){return this.regex.lastIndex=0,this.regex.test(str)}replace(str,replacement){return this.regex.lastIndex=0,str.replace(this.regex,replacement)}replaceAll(str,replacement,limit=0){var count;for(this.regex.lastIndex=0,count=0;this.regex.test(str)&&(0===limit||count<limit);)this.regex.lastIndex=0,str=str.replace(this.regex,replacement),count++;return[str,count]}}return Pattern.prototype.regex=null,Pattern.prototype.rawRegex=null,Pattern.prototype.cleanedRegex=null,Pattern.prototype.mapping=null,Pattern}.call(commonjsGlobal);var Pattern$4,Utils$3,Pattern_1=Pattern$5,hasProp={}.hasOwnProperty;Pattern$4=Pattern_1,Utils$3=function(){class Utils{static trim(str,_char="\\s"){var regexLeft,regexRight;return null==(regexLeft=this.REGEX_LEFT_TRIM_BY_CHAR[_char])&&(this.REGEX_LEFT_TRIM_BY_CHAR[_char]=regexLeft=new RegExp("^"+_char+_char+"*")),regexLeft.lastIndex=0,null==(regexRight=this.REGEX_RIGHT_TRIM_BY_CHAR[_char])&&(this.REGEX_RIGHT_TRIM_BY_CHAR[_char]=regexRight=new RegExp(_char+""+_char+"*$")),regexRight.lastIndex=0,str.replace(regexLeft,"").replace(regexRight,"")}static ltrim(str,_char="\\s"){var regexLeft;return null==(regexLeft=this.REGEX_LEFT_TRIM_BY_CHAR[_char])&&(this.REGEX_LEFT_TRIM_BY_CHAR[_char]=regexLeft=new RegExp("^"+_char+_char+"*")),regexLeft.lastIndex=0,str.replace(regexLeft,"")}static rtrim(str,_char="\\s"){var regexRight;return null==(regexRight=this.REGEX_RIGHT_TRIM_BY_CHAR[_char])&&(this.REGEX_RIGHT_TRIM_BY_CHAR[_char]=regexRight=new RegExp(_char+""+_char+"*$")),regexRight.lastIndex=0,str.replace(regexRight,"")}static isEmpty(value){return!value||""===value||"0"===value||value instanceof Array&&0===value.length||this.isEmptyObject(value)}static isEmptyObject(value){var k;return value instanceof Object&&0===function(){var results;for(k in results=[],value)hasProp.call(value,k)&&results.push(k);return results}().length}static subStrCount(string,subString,start,length){var c,i,j,len,ref,sublen;for(c=0,string=""+string,subString=""+subString,null!=start&&(string=string.slice(start)),null!=length&&(string=string.slice(0,length)),len=string.length,sublen=subString.length,i=j=0,ref=len;0<=ref?j<ref:j>ref;i=0<=ref?++j:--j)subString===string.slice(i,sublen)&&(c++,i+=sublen-1);return c}static isDigits(input){return this.REGEX_DIGITS.lastIndex=0,this.REGEX_DIGITS.test(input)}static octDec(input){return this.REGEX_OCTAL.lastIndex=0,parseInt((input+"").replace(this.REGEX_OCTAL,""),8)}static hexDec(input){return this.REGEX_HEXADECIMAL.lastIndex=0,"0x"===((input=this.trim(input))+"").slice(0,2)&&(input=(input+"").slice(2)),parseInt((input+"").replace(this.REGEX_HEXADECIMAL,""),16)}static utf8chr(c){var ch;return ch=String.fromCharCode,128>(c%=2097152)?ch(c):2048>c?ch(192|c>>6)+ch(128|63&c):65536>c?ch(224|c>>12)+ch(128|c>>6&63)+ch(128|63&c):ch(240|c>>18)+ch(128|c>>12&63)+ch(128|c>>6&63)+ch(128|63&c)}static parseBoolean(input,strict=!0){var lowerInput;return"string"==typeof input?(lowerInput=input.toLowerCase(),!(!strict&&"no"===lowerInput)&&("0"!==lowerInput&&("false"!==lowerInput&&""!==lowerInput))):!!input}static isNumeric(input){return this.REGEX_SPACES.lastIndex=0,"number"==typeof input||"string"==typeof input&&!isNaN(input)&&""!==input.replace(this.REGEX_SPACES,"")}static stringToDate(str){var date,day,fraction,hour,info,minute,month,second,tz_offset,year;if(!(null!=str?str.length:void 0))return null;if(!(info=this.PATTERN_DATE.exec(str)))return null;if(year=parseInt(info.year,10),month=parseInt(info.month,10)-1,day=parseInt(info.day,10),null==info.hour)return date=new Date(Date.UTC(year,month,day));if(hour=parseInt(info.hour,10),minute=parseInt(info.minute,10),second=parseInt(info.second,10),null!=info.fraction){for(fraction=info.fraction.slice(0,3);fraction.length<3;)fraction+="0";fraction=parseInt(fraction,10)}else fraction=0;return null!=info.tz&&(tz_offset=6e4*(60*parseInt(info.tz_hour,10)+(null!=info.tz_minute?parseInt(info.tz_minute,10):0)),"-"===info.tz_sign&&(tz_offset*=-1)),date=new Date(Date.UTC(year,month,day,hour,minute,second,fraction)),tz_offset&&date.setTime(date.getTime()-tz_offset),date}static strRepeat(str,number){var i,res;for(res="",i=0;i<number;)res+=str,i++;return res}static getStringFromFile(path,callback=null){var data,fs,j,len1,name,ref,xhr;if(xhr=null,"undefined"!=typeof window&&null!==window)if(window.XMLHttpRequest)xhr=new XMLHttpRequest;else if(window.ActiveXObject)for(j=0,len1=(ref=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Msxml2.XMLHTTP","Microsoft.XMLHTTP"]).length;j<len1;j++){name=ref[j];try{xhr=new ActiveXObject(name)}catch(error){}}return null!=xhr?null!=callback?(xhr.onreadystatechange=function(){if(4===xhr.readyState)return 200===xhr.status||0===xhr.status?callback(xhr.responseText):callback(null)},xhr.open("GET",path,!0),xhr.send(null)):(xhr.open("GET",path,!1),xhr.send(null),200===xhr.status||0===xhr.status?xhr.responseText:null):(fs=commonjsRequire("fs"),null!=callback?fs.readFile(path,(function(err,data){return callback(err?null:String(data))})):null!=(data=fs.readFileSync(path))?String(data):null)}}return Utils.REGEX_LEFT_TRIM_BY_CHAR={},Utils.REGEX_RIGHT_TRIM_BY_CHAR={},Utils.REGEX_SPACES=/\s+/g,Utils.REGEX_DIGITS=/^\d+$/,Utils.REGEX_OCTAL=/[^0-7]/gi,Utils.REGEX_HEXADECIMAL=/[^a-f0-9]/gi,Utils.PATTERN_DATE=new Pattern$4("^(?<year>[0-9][0-9][0-9][0-9])-(?<month>[0-9][0-9]?)-(?<day>[0-9][0-9]?)(?:(?:[Tt]|[ \t]+)(?<hour>[0-9][0-9]?):(?<minute>[0-9][0-9]):(?<second>[0-9][0-9])(?:.(?<fraction>[0-9]*))?(?:[ \t]*(?<tz>Z|(?<tz_sign>[-+])(?<tz_hour>[0-9][0-9]?)(?::(?<tz_minute>[0-9][0-9]))?))?)?$","i"),Utils.LOCAL_TIMEZONE_OFFSET=60*(new Date).getTimezoneOffset()*1e3,Utils}.call(commonjsGlobal);var Pattern$3,Unescaper$1,Utils$2,Utils_1=Utils$3;Utils$2=Utils_1,Pattern$3=Pattern_1,Unescaper$1=function(){class Unescaper{static unescapeSingleQuotedString(value){return value.replace(/\'\'/g,"'")}static unescapeDoubleQuotedString(value){return null==this._unescapeCallback&&(this._unescapeCallback=str=>this.unescapeCharacter(str)),this.PATTERN_ESCAPED_CHARACTER.replace(value,this._unescapeCallback)}static unescapeCharacter(value){var ch;switch(ch=String.fromCharCode,value.charAt(1)){case"0":return ch(0);case"a":return ch(7);case"b":return ch(8);case"t":case"\t":return"\t";case"n":return"\n";case"v":return ch(11);case"f":return ch(12);case"r":return ch(13);case"e":return ch(27);case" ":return" ";case'"':return'"';case"/":return"/";case"\\":return"\\";case"N":return ch(133);case"_":return ch(160);case"L":return ch(8232);case"P":return ch(8233);case"x":return Utils$2.utf8chr(Utils$2.hexDec(value.substr(2,2)));case"u":return Utils$2.utf8chr(Utils$2.hexDec(value.substr(2,4)));case"U":return Utils$2.utf8chr(Utils$2.hexDec(value.substr(2,8)));default:return""}}}return Unescaper.PATTERN_ESCAPED_CHARACTER=new Pattern$3('\\\\([0abt\tnvfre "\\/\\\\N_LP]|x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|U[0-9a-fA-F]{8})'),Unescaper}.call(commonjsGlobal);var Escaper$1,Pattern$2,Unescaper_1=Unescaper$1;Pattern$2=Pattern_1,Escaper$1=function(){var ch;class Escaper{static requiresDoubleQuoting(value){return this.PATTERN_CHARACTERS_TO_ESCAPE.test(value)}static escapeWithDoubleQuotes(value){return'"'+this.PATTERN_MAPPING_ESCAPEES.replace(value,(str=>this.MAPPING_ESCAPEES_TO_ESCAPED[str]))+'"'}static requiresSingleQuoting(value){return this.PATTERN_SINGLE_QUOTING.test(value)}static escapeWithSingleQuotes(value){return"'"+value.replace(/'/g,"''")+"'"}}return Escaper.LIST_ESCAPEES=["\\","\\\\",'\\"','"',"\0","","","","","","","","\b","\t","\n","\v","\f","\r","","","","","","","","","","","","","","","","","","",(ch=String.fromCharCode)(133),ch(160),ch(8232),ch(8233)],Escaper.LIST_ESCAPED=["\\\\",'\\"','\\"','\\"',"\\0","\\x01","\\x02","\\x03","\\x04","\\x05","\\x06","\\a","\\b","\\t","\\n","\\v","\\f","\\r","\\x0e","\\x0f","\\x10","\\x11","\\x12","\\x13","\\x14","\\x15","\\x16","\\x17","\\x18","\\x19","\\x1a","\\e","\\x1c","\\x1d","\\x1e","\\x1f","\\N","\\_","\\L","\\P"],Escaper.MAPPING_ESCAPEES_TO_ESCAPED=(()=>{var i,j,mapping,ref;for(mapping={},i=j=0,ref=Escaper.LIST_ESCAPEES.length;0<=ref?j<ref:j>ref;i=0<=ref?++j:--j)mapping[Escaper.LIST_ESCAPEES[i]]=Escaper.LIST_ESCAPED[i];return mapping})(),Escaper.PATTERN_CHARACTERS_TO_ESCAPE=new Pattern$2("[\\x00-\\x1f]|Ã‚Â…|Ã‚Â |Ã¢Â€Â¨|Ã¢Â€Â©"),Escaper.PATTERN_MAPPING_ESCAPEES=new Pattern$2(Escaper.LIST_ESCAPEES.join("|").split("\\").join("\\\\")),Escaper.PATTERN_SINGLE_QUOTING=new Pattern$2("[\\s'\":{}[\\],&*#?]|^[-?|<>=!%@`]"),Escaper}.call(commonjsGlobal);var Escaper,Inline$1,ParseException$1,ParseMore$1,Pattern$1,Unescaper,Utils$1,Inline,ParseException,ParseMore,Parser$1,Pattern,Utils,Parser,Escaper_1=Escaper$1,ParseException_1=class extends Error{constructor(message,parsedLine,snippet){super(message),this.message=message,this.parsedLine=parsedLine,this.snippet=snippet}toString(){return null!=this.parsedLine&&null!=this.snippet?"<ParseException> "+this.message+" (line "+this.parsedLine+": '"+this.snippet+"')":"<ParseException> "+this.message}},ParseMore_1=class extends Error{constructor(message,parsedLine,snippet){super(message),this.message=message,this.parsedLine=parsedLine,this.snippet=snippet}toString(){return null!=this.parsedLine&&null!=this.snippet?"<ParseMore> "+this.message+" (line "+this.parsedLine+": '"+this.snippet+"')":"<ParseMore> "+this.message}},indexOf=[].indexOf;Pattern$1=Pattern_1,Unescaper=Unescaper_1,Escaper=Escaper_1,Utils$1=Utils_1,ParseException$1=ParseException_1,ParseMore$1=ParseMore_1,Inline$1=function(){class Inline{static configure(exceptionOnInvalidType=null,objectDecoder=null){this.settings.exceptionOnInvalidType=exceptionOnInvalidType,this.settings.objectDecoder=objectDecoder}static parse(value,exceptionOnInvalidType=!1,objectDecoder=null){var context,result;if(this.settings.exceptionOnInvalidType=exceptionOnInvalidType,this.settings.objectDecoder=objectDecoder,null==value)return"";if(0===(value=Utils$1.trim(value)).length)return"";switch(context={exceptionOnInvalidType:exceptionOnInvalidType,objectDecoder:objectDecoder,i:0},value.charAt(0)){case"[":result=this.parseSequence(value,context),++context.i;break;case"{":result=this.parseMapping(value,context),++context.i;break;default:result=this.parseScalar(value,null,['"',"'"],context)}if(""!==this.PATTERN_TRAILING_COMMENTS.replace(value.slice(context.i),""))throw new ParseException$1('Unexpected characters near "'+value.slice(context.i)+'".');return result}static dump(value,exceptionOnInvalidType=!1,objectEncoder=null){var ref,result,type;return null==value?"null":"object"===(type=typeof value)?value instanceof Date?value.toISOString():null==objectEncoder||"string"!=typeof(result=objectEncoder(value))&&null==result?this.dumpObject(value):result:"boolean"===type?value?"true":"false":Utils$1.isDigits(value)?"string"===type?"'"+value+"'":String(parseInt(value)):Utils$1.isNumeric(value)?"string"===type?"'"+value+"'":String(parseFloat(value)):"number"===type?Infinity===value?".Inf":-Infinity===value?"-.Inf":isNaN(value)?".NaN":value:Escaper.requiresDoubleQuoting(value)?Escaper.escapeWithDoubleQuotes(value):Escaper.requiresSingleQuoting(value)?Escaper.escapeWithSingleQuotes(value):""===value?'""':Utils$1.PATTERN_DATE.test(value)||"null"===(ref=value.toLowerCase())||"~"===ref||"true"===ref||"false"===ref?"'"+value+"'":value}static dumpObject(value,exceptionOnInvalidType,objectSupport=null){var j,key,len1,output,val;if(value instanceof Array){for(output=[],j=0,len1=value.length;j<len1;j++)val=value[j],output.push(this.dump(val));return"["+output.join(", ")+"]"}for(key in output=[],value)val=value[key],output.push(this.dump(key)+": "+this.dump(val));return"{"+output.join(", ")+"}"}static parseScalar(scalar,delimiters=null,stringDelimiters=['"',"'"],context=null,evaluate=!0){var i,joinedDelimiters,match,output,pattern,ref,ref1,strpos;if(null==context&&(context={exceptionOnInvalidType:this.settings.exceptionOnInvalidType,objectDecoder:this.settings.objectDecoder,i:0}),({i:i}=context),ref=scalar.charAt(i),indexOf.call(stringDelimiters,ref)>=0){if(output=this.parseQuotedScalar(scalar,context),({i:i}=context),null!=delimiters&&(ref1=Utils$1.ltrim(scalar.slice(i)," ").charAt(0),!(indexOf.call(delimiters,ref1)>=0)))throw new ParseException$1("Unexpected characters ("+scalar.slice(i)+").")}else{if(delimiters){if(joinedDelimiters=delimiters.join("|"),null==(pattern=this.PATTERN_SCALAR_BY_DELIMITERS[joinedDelimiters])&&(pattern=new Pattern$1("^(.+?)("+joinedDelimiters+")"),this.PATTERN_SCALAR_BY_DELIMITERS[joinedDelimiters]=pattern),!(match=pattern.exec(scalar.slice(i))))throw new ParseException$1("Malformed inline YAML string ("+scalar+").");i+=(output=match[1]).length}else i+=(output=scalar.slice(i)).length,-1!==(strpos=output.indexOf(" #"))&&(output=Utils$1.rtrim(output.slice(0,strpos)));evaluate&&(output=this.evaluateScalar(output,context))}return context.i=i,output}static parseQuotedScalar(scalar,context){var i,match,output;if(({i:i}=context),!(match=this.PATTERN_QUOTED_SCALAR.exec(scalar.slice(i))))throw new ParseMore$1("Malformed inline YAML string ("+scalar.slice(i)+").");return output=match[0].substr(1,match[0].length-2),output='"'===scalar.charAt(i)?Unescaper.unescapeDoubleQuotedString(output):Unescaper.unescapeSingleQuotedString(output),i+=match[0].length,context.i=i,output}static parseSequence(sequence,context){var i,isQuoted,len,output,ref,value;for(output=[],len=sequence.length,({i:i}=context),i+=1;i<len;){switch(context.i=i,sequence.charAt(i)){case"[":output.push(this.parseSequence(sequence,context)),({i:i}=context);break;case"{":output.push(this.parseMapping(sequence,context)),({i:i}=context);break;case"]":return output;case",":case" ":case"\n":break;default:if(isQuoted='"'===(ref=sequence.charAt(i))||"'"===ref,value=this.parseScalar(sequence,[",","]"],['"',"'"],context),({i:i}=context),!isQuoted&&"string"==typeof value&&(-1!==value.indexOf(": ")||-1!==value.indexOf(":\n")))try{value=this.parseMapping("{"+value+"}")}catch(error){}output.push(value),--i}++i}throw new ParseMore$1("Malformed inline YAML string "+sequence)}static parseMapping(mapping,context){var done,i,key,len,output,shouldContinueWhileLoop,value;for(output={},len=mapping.length,({i:i}=context),i+=1,shouldContinueWhileLoop=!1;i<len;){switch(context.i=i,mapping.charAt(i)){case" ":case",":case"\n":++i,context.i=i,shouldContinueWhileLoop=!0;break;case"}":return output}if(shouldContinueWhileLoop)shouldContinueWhileLoop=!1;else for(key=this.parseScalar(mapping,[":"," ","\n"],['"',"'"],context,!1),({i:i}=context),done=!1;i<len;){switch(context.i=i,mapping.charAt(i)){case"[":value=this.parseSequence(mapping,context),({i:i}=context),void 0===output[key]&&(output[key]=value),done=!0;break;case"{":value=this.parseMapping(mapping,context),({i:i}=context),void 0===output[key]&&(output[key]=value),done=!0;break;case":":case" ":case"\n":break;default:value=this.parseScalar(mapping,[",","}"],['"',"'"],context),({i:i}=context),void 0===output[key]&&(output[key]=value),done=!0,--i}if(++i,done)break}}throw new ParseMore$1("Malformed inline YAML string "+mapping)}static evaluateScalar(scalar,context){var cast,date,exceptionOnInvalidType,firstSpace,objectDecoder,raw,scalarLower,subValue,trimmedScalar;switch(scalarLower=(scalar=Utils$1.trim(scalar)).toLowerCase()){case"null":case"":case"~":return null;case"true":return!0;case"false":return!1;case".inf":case"-.inf":return Infinity;case".nan":return NaN;default:switch(scalarLower.charAt(0)){case"!":switch(-1===(firstSpace=scalar.indexOf(" "))?scalarLower:scalarLower.slice(0,firstSpace)){case"!":return-1!==firstSpace?parseInt(this.parseScalar(scalar.slice(2))):null;case"!str":return Utils$1.ltrim(scalar.slice(4));case"!!str":return Utils$1.ltrim(scalar.slice(5));case"!!int":return parseInt(this.parseScalar(scalar.slice(5)));case"!!bool":return Utils$1.parseBoolean(this.parseScalar(scalar.slice(6)),!1);case"!!float":return parseFloat(this.parseScalar(scalar.slice(7)));case"!!timestamp":return Utils$1.stringToDate(Utils$1.ltrim(scalar.slice(11)));default:if(null==context&&(context={exceptionOnInvalidType:this.settings.exceptionOnInvalidType,objectDecoder:this.settings.objectDecoder,i:0}),({objectDecoder:objectDecoder,exceptionOnInvalidType:exceptionOnInvalidType}=context),objectDecoder)return-1===(firstSpace=(trimmedScalar=Utils$1.rtrim(scalar)).indexOf(" "))?objectDecoder(trimmedScalar,null):((subValue=Utils$1.ltrim(trimmedScalar.slice(firstSpace+1))).length>0||(subValue=null),objectDecoder(trimmedScalar.slice(0,firstSpace),subValue));if(exceptionOnInvalidType)throw new ParseException$1("Custom object support when parsing a YAML file has been disabled.");return null}case"0":return"0x"===scalar.slice(0,2)?Utils$1.hexDec(scalar):Utils$1.isDigits(scalar)?Utils$1.octDec(scalar):Utils$1.isNumeric(scalar)?parseFloat(scalar):scalar;case"+":return Utils$1.isDigits(scalar)?(raw=scalar,cast=parseInt(raw),raw===String(cast)?cast:raw):Utils$1.isNumeric(scalar)?parseFloat(scalar):this.PATTERN_THOUSAND_NUMERIC_SCALAR.test(scalar)?parseFloat(scalar.replace(",","")):scalar;case"-":return Utils$1.isDigits(scalar.slice(1))?"0"===scalar.charAt(1)?-Utils$1.octDec(scalar.slice(1)):(raw=scalar.slice(1),cast=parseInt(raw),raw===String(cast)?-cast:-raw):Utils$1.isNumeric(scalar)?parseFloat(scalar):this.PATTERN_THOUSAND_NUMERIC_SCALAR.test(scalar)?parseFloat(scalar.replace(",","")):scalar;default:return(date=Utils$1.stringToDate(scalar))?date:Utils$1.isNumeric(scalar)?parseFloat(scalar):this.PATTERN_THOUSAND_NUMERIC_SCALAR.test(scalar)?parseFloat(scalar.replace(",","")):scalar}}}}return Inline.REGEX_QUOTED_STRING="(?:\"(?:[^\"\\\\]*(?:\\\\.[^\"\\\\]*)*)\"|'(?:[^']*(?:''[^']*)*)')",Inline.PATTERN_TRAILING_COMMENTS=new Pattern$1("^\\s*#.*$"),Inline.PATTERN_QUOTED_SCALAR=new Pattern$1("^"+Inline.REGEX_QUOTED_STRING),Inline.PATTERN_THOUSAND_NUMERIC_SCALAR=new Pattern$1("^(-|\\+)?[0-9,]+(\\.[0-9]+)?$"),Inline.PATTERN_SCALAR_BY_DELIMITERS={},Inline.settings={},Inline}.call(commonjsGlobal),Inline=Inline$1,Pattern=Pattern_1,Utils=Utils_1,ParseException=ParseException_1,ParseMore=ParseMore_1,Parser$1=function(){class Parser{constructor(offset=0){this.offset=offset,this.lines=[],this.currentLineNb=-1,this.currentLine="",this.refs={}}parse(value,exceptionOnInvalidType=!1,objectDecoder=null){var alias,allowOverwrite,block,c,context,data,e,first,i,indent,isRef,j,k,key,l,lastKey,len,len1,len2,len3,lineCount,m,matches,mergeNode,n,name,parsed,parsedItem,parser,ref,ref1,ref2,refName,refValue,val,values;for(this.currentLineNb=-1,this.currentLine="",this.lines=this.cleanup(value).split("\n"),data=null,context=this.CONTEXT_NONE,allowOverwrite=!1;this.moveToNextLine();)if(!this.isCurrentLineEmpty()){if("\t"===this.currentLine[0])throw new ParseException("A YAML file cannot contain tabs as indentation.",this.getRealCurrentLineNb()+1,this.currentLine);if(isRef=mergeNode=!1,values=this.PATTERN_SEQUENCE_ITEM.exec(this.currentLine)){if(this.CONTEXT_MAPPING===context)throw new ParseException("You cannot define a sequence item when in a mapping");context=this.CONTEXT_SEQUENCE,null==data&&(data=[]),null!=values.value&&(matches=this.PATTERN_ANCHOR_VALUE.exec(values.value))&&(isRef=matches.ref,values.value=matches.value),null==values.value||""===Utils.trim(values.value," ")||0===Utils.ltrim(values.value," ").indexOf("#")?this.currentLineNb<this.lines.length-1&&!this.isNextLineUnIndentedCollection()?(c=this.getRealCurrentLineNb()+1,(parser=new Parser(c)).refs=this.refs,data.push(parser.parse(this.getNextEmbedBlock(null,!0),exceptionOnInvalidType,objectDecoder))):data.push(null):(null!=(ref=values.leadspaces)?ref.length:void 0)&&(matches=this.PATTERN_COMPACT_NOTATION.exec(values.value))?(c=this.getRealCurrentLineNb(),(parser=new Parser(c)).refs=this.refs,block=values.value,indent=this.getCurrentLineIndentation(),this.isNextLineIndented(!1)&&(block+="\n"+this.getNextEmbedBlock(indent+values.leadspaces.length+1,!0)),data.push(parser.parse(block,exceptionOnInvalidType,objectDecoder))):data.push(this.parseValue(values.value,exceptionOnInvalidType,objectDecoder))}else{if(!(values=this.PATTERN_MAPPING_ITEM.exec(this.currentLine))||-1!==values.key.indexOf(" #")){if(1===(lineCount=this.lines.length)||2===lineCount&&Utils.isEmpty(this.lines[1])){try{value=Inline.parse(this.lines[0],exceptionOnInvalidType,objectDecoder)}catch(error){throw(e=error).parsedLine=this.getRealCurrentLineNb()+1,e.snippet=this.currentLine,e}if("object"==typeof value){if(value instanceof Array)first=value[0];else for(key in value){first=value[key];break}if("string"==typeof first&&0===first.indexOf("*")){for(data=[],n=0,len3=value.length;n<len3;n++)alias=value[n],data.push(this.refs[alias.slice(1)]);value=data}}return value}if("["===(ref2=Utils.ltrim(value).charAt(0))||"{"===ref2)try{return Inline.parse(value,exceptionOnInvalidType,objectDecoder)}catch(error){throw(e=error).parsedLine=this.getRealCurrentLineNb()+1,e.snippet=this.currentLine,e}throw new ParseException("Unable to parse.",this.getRealCurrentLineNb()+1,this.currentLine)}if(this.CONTEXT_SEQUENCE===context)throw new ParseException("You cannot define a mapping item when in a sequence");context=this.CONTEXT_MAPPING,null==data&&(data={}),Inline.configure(exceptionOnInvalidType,objectDecoder);try{key=Inline.parseScalar(values.key)}catch(error){throw(e=error).parsedLine=this.getRealCurrentLineNb()+1,e.snippet=this.currentLine,e}if("<<"===key)if(mergeNode=!0,allowOverwrite=!0,0===(null!=(ref1=values.value)?ref1.indexOf("*"):void 0)){if(refName=values.value.slice(1),null==this.refs[refName])throw new ParseException('Reference "'+refName+'" does not exist.',this.getRealCurrentLineNb()+1,this.currentLine);if("object"!=typeof(refValue=this.refs[refName]))throw new ParseException("YAML merge keys used with a scalar value instead of an object.",this.getRealCurrentLineNb()+1,this.currentLine);if(refValue instanceof Array)for(i=j=0,len=refValue.length;j<len;i=++j)value=refValue[i],null==data[name=String(i)]&&(data[name]=value);else for(key in refValue)value=refValue[key],null==data[key]&&(data[key]=value)}else{if(value=null!=values.value&&""!==values.value?values.value:this.getNextEmbedBlock(),c=this.getRealCurrentLineNb()+1,(parser=new Parser(c)).refs=this.refs,"object"!=typeof(parsed=parser.parse(value,exceptionOnInvalidType)))throw new ParseException("YAML merge keys used with a scalar value instead of an object.",this.getRealCurrentLineNb()+1,this.currentLine);if(parsed instanceof Array)for(l=0,len1=parsed.length;l<len1;l++){if("object"!=typeof(parsedItem=parsed[l]))throw new ParseException("Merge items must be objects.",this.getRealCurrentLineNb()+1,parsedItem);if(parsedItem instanceof Array)for(i=m=0,len2=parsedItem.length;m<len2;i=++m)value=parsedItem[i],k=String(i),data.hasOwnProperty(k)||(data[k]=value);else for(key in parsedItem)value=parsedItem[key],data.hasOwnProperty(key)||(data[key]=value)}else for(key in parsed)value=parsed[key],data.hasOwnProperty(key)||(data[key]=value)}else null!=values.value&&(matches=this.PATTERN_ANCHOR_VALUE.exec(values.value))&&(isRef=matches.ref,values.value=matches.value);mergeNode||(null==values.value||""===Utils.trim(values.value," ")||0===Utils.ltrim(values.value," ").indexOf("#")?this.isNextLineIndented()||this.isNextLineUnIndentedCollection()?(c=this.getRealCurrentLineNb()+1,(parser=new Parser(c)).refs=this.refs,val=parser.parse(this.getNextEmbedBlock(),exceptionOnInvalidType,objectDecoder),(allowOverwrite||void 0===data[key])&&(data[key]=val)):(allowOverwrite||void 0===data[key])&&(data[key]=null):(val=this.parseValue(values.value,exceptionOnInvalidType,objectDecoder),(allowOverwrite||void 0===data[key])&&(data[key]=val)))}if(isRef)if(data instanceof Array)this.refs[isRef]=data[data.length-1];else{for(key in lastKey=null,data)lastKey=key;this.refs[isRef]=data[lastKey]}}return Utils.isEmpty(data)?null:data}getRealCurrentLineNb(){return this.currentLineNb+this.offset}getCurrentLineIndentation(){return this.currentLine.length-Utils.ltrim(this.currentLine," ").length}getNextEmbedBlock(indentation=null,includeUnindentedCollection=!1){var data,indent,isItUnindentedCollection,newIndent,removeComments,removeCommentsPattern,unindentedEmbedBlock;if(this.moveToNextLine(),null==indentation){if(newIndent=this.getCurrentLineIndentation(),unindentedEmbedBlock=this.isStringUnIndentedCollectionItem(this.currentLine),!this.isCurrentLineEmpty()&&0===newIndent&&!unindentedEmbedBlock)throw new ParseException("Indentation problem.",this.getRealCurrentLineNb()+1,this.currentLine)}else newIndent=indentation;for(data=[this.currentLine.slice(newIndent)],includeUnindentedCollection||(isItUnindentedCollection=this.isStringUnIndentedCollectionItem(this.currentLine)),removeComments=!(removeCommentsPattern=this.PATTERN_FOLDED_SCALAR_END).test(this.currentLine);this.moveToNextLine();)if((indent=this.getCurrentLineIndentation())===newIndent&&(removeComments=!removeCommentsPattern.test(this.currentLine)),!removeComments||!this.isCurrentLineComment())if(this.isCurrentLineBlank())data.push(this.currentLine.slice(newIndent));else{if(isItUnindentedCollection&&!this.isStringUnIndentedCollectionItem(this.currentLine)&&indent===newIndent){this.moveToPreviousLine();break}if(indent>=newIndent)data.push(this.currentLine.slice(newIndent));else if("#"!==Utils.ltrim(this.currentLine).charAt(0)){if(0===indent){this.moveToPreviousLine();break}throw new ParseException("Indentation problem.",this.getRealCurrentLineNb()+1,this.currentLine)}}return data.join("\n")}moveToNextLine(){return!(this.currentLineNb>=this.lines.length-1)&&(this.currentLine=this.lines[++this.currentLineNb],!0)}moveToPreviousLine(){this.currentLine=this.lines[--this.currentLineNb]}parseValue(value,exceptionOnInvalidType,objectDecoder){var e,foldedIndent,matches,modifiers,pos,ref,ref1,val;if(0===value.indexOf("*")){if(pos=value.indexOf("#"),value=-1!==pos?value.substr(1,pos-2):value.slice(1),void 0===this.refs[value])throw new ParseException('Reference "'+value+'" does not exist.',this.currentLine);return this.refs[value]}if(matches=this.PATTERN_FOLDED_SCALAR_ALL.exec(value))return modifiers=null!=(ref=matches.modifiers)?ref:"",foldedIndent=Math.abs(parseInt(modifiers)),isNaN(foldedIndent)&&(foldedIndent=0),val=this.parseFoldedScalar(matches.separator,this.PATTERN_DECIMAL.replace(modifiers,""),foldedIndent),null!=matches.type?(Inline.configure(exceptionOnInvalidType,objectDecoder),Inline.parseScalar(matches.type+" "+val)):val;if("["!==(ref1=value.charAt(0))&&"{"!==ref1&&'"'!==ref1&&"'"!==ref1)return this.isNextLineIndented()&&(value+="\n"+this.getNextEmbedBlock()),Inline.parse(value,exceptionOnInvalidType,objectDecoder);for(;;)try{return Inline.parse(value,exceptionOnInvalidType,objectDecoder)}catch(error){if(!((e=error)instanceof ParseMore&&this.moveToNextLine()))throw e.parsedLine=this.getRealCurrentLineNb()+1,e.snippet=this.currentLine,e;value+="\n"+Utils.trim(this.currentLine," ")}}parseFoldedScalar(separator,indicator="",indentation=0){var isCurrentLineBlank,j,len,line,matches,newText,notEOF,pattern,ref,text;if(!(notEOF=this.moveToNextLine()))return"";for(isCurrentLineBlank=this.isCurrentLineBlank(),text="";notEOF&&isCurrentLineBlank;)(notEOF=this.moveToNextLine())&&(text+="\n",isCurrentLineBlank=this.isCurrentLineBlank());if(0===indentation&&(matches=this.PATTERN_INDENT_SPACES.exec(this.currentLine))&&(indentation=matches[0].length),indentation>0)for(null==(pattern=this.PATTERN_FOLDED_SCALAR_BY_INDENTATION[indentation])&&(pattern=new Pattern("^ {"+indentation+"}(.*)$"),Parser.prototype.PATTERN_FOLDED_SCALAR_BY_INDENTATION[indentation]=pattern);notEOF&&(isCurrentLineBlank||(matches=pattern.exec(this.currentLine)));)text+=isCurrentLineBlank?this.currentLine.slice(indentation):matches[1],(notEOF=this.moveToNextLine())&&(text+="\n",isCurrentLineBlank=this.isCurrentLineBlank());else notEOF&&(text+="\n");if(notEOF&&this.moveToPreviousLine(),">"===separator){for(newText="",j=0,len=(ref=text.split("\n")).length;j<len;j++)0===(line=ref[j]).length||" "===line.charAt(0)?newText=Utils.rtrim(newText," ")+line+"\n":newText+=line+" ";text=newText}return"+"!==indicator&&(text=Utils.rtrim(text)),""===indicator?text=this.PATTERN_TRAILING_LINES.replace(text,"\n"):"-"===indicator&&(text=this.PATTERN_TRAILING_LINES.replace(text,"")),text}isNextLineIndented(ignoreComments=!0){var EOF,currentIndentation,ret;if(currentIndentation=this.getCurrentLineIndentation(),EOF=!this.moveToNextLine(),ignoreComments)for(;!EOF&&this.isCurrentLineEmpty();)EOF=!this.moveToNextLine();else for(;!EOF&&this.isCurrentLineBlank();)EOF=!this.moveToNextLine();return!EOF&&(ret=!1,this.getCurrentLineIndentation()>currentIndentation&&(ret=!0),this.moveToPreviousLine(),ret)}isCurrentLineEmpty(){var trimmedLine;return 0===(trimmedLine=Utils.trim(this.currentLine," ")).length||"#"===trimmedLine.charAt(0)}isCurrentLineBlank(){return""===Utils.trim(this.currentLine," ")}isCurrentLineComment(){return"#"===Utils.ltrim(this.currentLine," ").charAt(0)}cleanup(value){var count,i,indent,j,l,len,len1,line,lines,smallestIndent,trimmedValue;for(-1!==value.indexOf("\r")&&(value=value.split("\r\n").join("\n").split("\r").join("\n")),count=0,[value,count]=this.PATTERN_YAML_HEADER.replaceAll(value,""),this.offset+=count,[trimmedValue,count]=this.PATTERN_LEADING_COMMENTS.replaceAll(value,"",1),1===count&&(this.offset+=Utils.subStrCount(value,"\n")-Utils.subStrCount(trimmedValue,"\n"),value=trimmedValue),[trimmedValue,count]=this.PATTERN_DOCUMENT_MARKER_START.replaceAll(value,"",1),1===count&&(this.offset+=Utils.subStrCount(value,"\n")-Utils.subStrCount(trimmedValue,"\n"),value=trimmedValue,value=this.PATTERN_DOCUMENT_MARKER_END.replace(value,"")),smallestIndent=-1,j=0,len=(lines=value.split("\n")).length;j<len;j++)line=lines[j],0!==Utils.trim(line," ").length&&(indent=line.length-Utils.ltrim(line).length,(-1===smallestIndent||indent<smallestIndent)&&(smallestIndent=indent));if(smallestIndent>0){for(i=l=0,len1=lines.length;l<len1;i=++l)line=lines[i],lines[i]=line.slice(smallestIndent);value=lines.join("\n")}return value}isNextLineUnIndentedCollection(currentIndentation=null){var notEOF,ret;for(null==currentIndentation&&(currentIndentation=this.getCurrentLineIndentation()),notEOF=this.moveToNextLine();notEOF&&this.isCurrentLineEmpty();)notEOF=this.moveToNextLine();return!1!==notEOF&&(ret=!1,this.getCurrentLineIndentation()===currentIndentation&&this.isStringUnIndentedCollectionItem(this.currentLine)&&(ret=!0),this.moveToPreviousLine(),ret)}isStringUnIndentedCollectionItem(){return"-"===this.currentLine||"- "===this.currentLine.slice(0,2)}}return Parser.prototype.PATTERN_FOLDED_SCALAR_ALL=new Pattern("^(?:(?<type>![^\\|>]*)\\s+)?(?<separator>\\||>)(?<modifiers>\\+|\\-|\\d+|\\+\\d+|\\-\\d+|\\d+\\+|\\d+\\-)?(?<comments> +#.*)?$"),Parser.prototype.PATTERN_FOLDED_SCALAR_END=new Pattern("(?<separator>\\||>)(?<modifiers>\\+|\\-|\\d+|\\+\\d+|\\-\\d+|\\d+\\+|\\d+\\-)?(?<comments> +#.*)?$"),Parser.prototype.PATTERN_SEQUENCE_ITEM=new Pattern("^\\-((?<leadspaces>\\s+)(?<value>.+?))?\\s*$"),Parser.prototype.PATTERN_ANCHOR_VALUE=new Pattern("^&(?<ref>[^ ]+) *(?<value>.*)"),Parser.prototype.PATTERN_COMPACT_NOTATION=new Pattern("^(?<key>"+Inline.REGEX_QUOTED_STRING+"|[^ '\"\\{\\[].*?) *\\:(\\s+(?<value>.+?))?\\s*$"),Parser.prototype.PATTERN_MAPPING_ITEM=new Pattern("^(?<key>"+Inline.REGEX_QUOTED_STRING+"|[^ '\"\\[\\{].*?) *\\:(\\s+(?<value>.+?))?\\s*$"),Parser.prototype.PATTERN_DECIMAL=new Pattern("\\d+"),Parser.prototype.PATTERN_INDENT_SPACES=new Pattern("^ +"),Parser.prototype.PATTERN_TRAILING_LINES=new Pattern("(\n*)$"),Parser.prototype.PATTERN_YAML_HEADER=new Pattern("^\\%YAML[: ][\\d\\.]+.*\n","m"),Parser.prototype.PATTERN_LEADING_COMMENTS=new Pattern("^(\\#.*?\n)+","m"),Parser.prototype.PATTERN_DOCUMENT_MARKER_START=new Pattern("^\\-\\-\\-.*?\n","m"),Parser.prototype.PATTERN_DOCUMENT_MARKER_END=new Pattern("^\\.\\.\\.\\s*$","m"),Parser.prototype.PATTERN_FOLDED_SCALAR_BY_INDENTATION={},Parser.prototype.CONTEXT_NONE=0,Parser.prototype.CONTEXT_SEQUENCE=1,Parser.prototype.CONTEXT_MAPPING=2,Parser}.call(commonjsGlobal),Parser=Parser$1;var Yamlparser=class{static parse(input,exceptionOnInvalidType=!1,objectDecoder=null){return(new Parser).parse(input,exceptionOnInvalidType,objectDecoder)}};export{Yamlparser as default};

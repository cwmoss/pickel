<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  </head>

  <body>
    <!--div class="app-loading">LOADING</div-->
    <pi-start id="body"></pi-start>

    <script type="module">
      import { LitElement, css, html } from "./vendor/lit-core.min.js";

      class Hello extends LitElement {
        static properties = {
          name: {},
        };
        connectedCallback() {
          super.connectedCallback();
        }
        firstUpdated() {
          this.greet = this.renderRoot.querySelector("pi-greet");
          this.greet.gname = "heinz";
          console.log("heinz is set", this.greet);
          setTimeout(() => {
            console.log("erika is set", this.greet);
            this.renderRoot.querySelector("pi-greet").gname = "erika";
          }, 4000);
        }
        render() {
          return html`<strong>hello <pi-greet></pi-greet></strong>`;
        }
      }

      customElements.define("pi-start", Hello);
      let el = document.createElement("pi-greet");
      el.gname = "otto";
      console.log(el);
      document.body.append(el);

      let el2 = document.createElement("pi-greet2");
      el2.gname = "otto2";
      console.log(el2);
      document.body.append(el2);

      setTimeout(() => {
        class Greet extends LitElement {
          static properties = {
            gname: {},
          };

          constructor() {
            super();
            this.gname = "world";
          }
          set gname(val) {
            console.log("+++setting gname", val);
            this._n = val;
            //this.requestUpdate();
            //this.gname = val;
          }
          get gname() {
            return this._n;
          }
          render() {
            console.log(Object.getOwnPropertyDescriptors(Greet.prototype));
            return html`<em>${this.gname}</em>`;
          }
        }
        customElements.define("pi-greet", Greet);
        console.log("greet is upgraded");

        class Greet2 extends Greet {}

        customElements.define("pi-greet2", Greet2);
        console.log("greet2 is upgraded");
      }, 2000);
    </script>
  </body>
</html>
